<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contact Us</title>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
        integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inika:wght@400;700&display=swap" rel="stylesheet" />
</head>
<body>
    <div id="navbar-placeholder"></div>
    <div class="upper">
        <h1>Get In Touch</h1>
        <br/>
        <p>
            If you have questions, need more information about our programs, or<br />
            wish to collaborate with us, please don't hesitate to reach out.
        </p>
    </div>
    <div class="main">
        <div class="info">
            <p>Contact Information</p>
            <div class="contact">
                <span class="data"><i class="fa-solid fa-phone"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+91-8197355166</span>
                <span class="data"><i class="fa-solid fa-envelope"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onedream@visionastra.com</span>
                <span class="data"><i class="fa-solid fa-map-location"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bengaluru, KA, India</span>
            </div>
            <span class="icons"><i class="fa-brands fa-linkedin"></i></span>
            <span class="icons"><i class="fa-brands fa-square-instagram"></i></span>
            <span class="icons"><i class="fa-brands fa-square-whatsapp"></i></span>
            <span class="circle"></span>
        </div>
        <div class="form">
            <form id="contactForm">
                <div class="same">
                    <div class="one">
                        <label for="name">Your Name</label>
                        <input id="name" name="name" type="text" class="name" required minlength="2" maxlength="50" />
                    </div>
                    <div class="two">
                        <label for="email">Your Email</label>
                        <input id="email" name="email" type="email" class="email" required />
                    </div>
                </div>
                <label for="sub">Your Subject</label>
                <input id="sub" name="subject" type="text" class="sub" required minlength="5" maxlength="100" />
                <label for="message" class="message">Message</label>
                <textarea name="message" id="message" placeholder="Write your message here" rows="4" cols="64" required minlength="10" maxlength="500"></textarea>
                <button class="submit-btn" type="submit">Send Message</button>
            </form>
            <div id="responseMessage"></div>
        </div>
    </div>
    <script>
        document.getElementById('contactForm').addEventListener('submit', function (event) {
            event.preventDefault();

            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const subject = document.getElementById('sub').value;
            const message = document.getElementById('message').value;
            const responseMessage = document.getElementById('responseMessage');

            // Custom validation
            if (name.trim().length < 2 || name.trim().length > 50) {
                responseMessage.innerHTML = '<p style="color: red;">Name must be between 2 and 50 characters.</p>';
                return;
            }

            if (!validateEmail(email)) {
                responseMessage.innerHTML = '<p style="color: red;">Please enter a valid email address.</p>';
                return;
            }

            if (subject.trim().length < 5 || subject.trim().length > 100) {
                responseMessage.innerHTML = '<p style="color: red;">Subject must be between 5 and 100 characters.</p>';
                return;
            }

            if (message.trim().length < 10 || message.trim().length > 500) {
                responseMessage.innerHTML = '<p style="color: red;">Message must be between 10 and 500 characters.</p>';
                return;
            }

            // If all validations pass, submit the form
            const formData = new FormData(this);

            fetch('php/submit_contact.php', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    responseMessage.innerHTML = `<p style="color: green;">${data.message}</p>`;
                    this.reset();
                } else {
                    responseMessage.innerHTML = `<p style="color: red;">${data.message}</p>`;
                }
            })
            .catch(error => {
                responseMessage.innerHTML = `<p style="color: red;">Error: Something went wrong!</p>`;
            });
        });

        function validateEmail(email) {
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailPattern.test(email);
        }

        // Load the navbar.html file into the div with id="navbar-placeholder"
        fetch('navbarcomp/navbar.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('navbar-placeholder').innerHTML = data;
            })
            .catch(error => console.error('Error loading navbar:', error));
    </script>
</body>
</html>
